"use strict";(self.webpackChunkaffiliate_traffic=self.webpackChunkaffiliate_traffic||[]).push([[1910],{19436:function(pe,T,e){var Y=e(15009),r=e.n(Y),q=e(99289),u=e.n(q),ee=e(5574),Z=e.n(ee),re=e(1848),ne=e(71230),K=e(15746),$=e(67294),O=e(85893),f={name:"",accountId:"",adultContent:0,createdAt:"",defaultState:!1,projectId:"",id:0,describe:"",image:"",kind:""},F=function(){var N=(0,$.useState)(f),D=Z()(N,2),b=D[0],A=D[1],Q=function(){var z=u()(r()().mark(function B(){var R;return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,re.Io)();case 2:R=p.sent,R&&R.status===200&&R.data&&A(R.data);case 4:case"end":return p.stop()}},B)}));return function(){return z.apply(this,arguments)}}();return(0,$.useEffect)(function(){Q()},[]),(0,O.jsx)(ne.Z,{children:(0,O.jsx)(K.Z,{children:(0,O.jsxs)("p",{children:["\u5F53\u524D\u9879\u76EE\uFF1A","".concat(b&&b.name?b.name:"\u65E0\u9879\u76EE")]})})})};T.Z=F},29185:function(pe,T,e){var Y=e(97857),r=e.n(Y),q=e(5574),u=e.n(q),ee=e(55102),Z=e(67294),re=e(85893);function ne(K){var $=K.value,O=K.onChange,f=(0,Z.useState)($),F=u()(f,2),ae=F[0],N=F[1],D=(0,Z.useState)(!1),b=u()(D,2),A=b[0],Q=b[1],z=navigator.userAgent.indexOf("WebKit")>-1;(0,Z.useEffect)(function(){N($)},[$]);var B=function(){Q(!0)},R=function(i){Q(!1),z&&(O==null||O(i.currentTarget.value))},C=function(i){var S=i.target.value;N(S),A||O==null||O(S)};return(0,re.jsx)(ee.Z,r()(r()({},K),{},{value:ae,onChange:C,onCompositionStart:B,onCompositionEnd:R}))}T.Z=Z.memo(ne)},4518:function(pe,T){T.Z={w_50:"?x-oss-process=image/resize,w_50,m_lfit",w_100:"?x-oss-process=image/resize,w_100,m_lfit",w_160:"?x-oss-process=image/resize,w_160,m_lfit"}},35517:function(pe,T,e){e.d(T,{Z:function(){return ae}});var Y=e(15009),r=e.n(Y),q=e(99289),u=e.n(q),ee=e(4518),Z=e(82061),re=e(69753),ne=e(14776),K=e(17788),$=e(79607),O=e(67294),f=e(85893);function F(){var N=(0,ne.useModel)("material"),D=N.imageList,b=N.delRemoteMaterialFetch,A=N.updateOperateMaterial,Q=function(){var C=u()(r()().mark(function p(i){return r()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:fetch(i.url).then(function(U){return U.blob()}).then(function(U){var G=URL.createObjectURL(new Blob([U])),k=document.createElement("a");k.href=G,k.download="image.png",document.body.appendChild(k),k.click(),URL.revokeObjectURL(G),k.remove()});case 1:case"end":return P.stop()}},p)}));return function(i){return C.apply(this,arguments)}}(),z=function(){var C=u()(r()().mark(function p(i){return r()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:i.status===1?K.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u5F7B\u5E95\u5220\u9664\u670D\u52A1\u6587\u4EF6\uFF0C\u8D44\u6E90\u5730\u5740\u5C06\u5931\u53BB\u8BBF\u95EE",onOk:function(){var U=u()(r()().mark(function k(){return r()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,b(i);case 2:case"end":return I.stop()}},k)}));function G(){return U.apply(this,arguments)}return G}(),onCancel:function(){console.log("Cancel")}}):K.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u5F53\u524D\u7684\u7D20\u6750\u5F7B\u5E95\u5220\u9664\uFF0C\u5F15\u7528\u9875\u9762\u5931\u6548",onOk:function(){var U=u()(r()().mark(function k(){return r()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,b(i);case 2:case"end":return I.stop()}},k)}));function G(){return U.apply(this,arguments)}return G}(),onCancel:function(){console.log("Cancel")}});case 1:case"end":return P.stop()}},p)}));return function(i){return C.apply(this,arguments)}}(),B=function(){var C=u()(r()().mark(function p(i){return r()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:console.log("currentItem1:",i),i&&i.keys&&D&&D.length>0&&(A(i),console.log("currentItem2:",i));case 2:case"end":return P.stop()}},p)}));return function(i){return C.apply(this,arguments)}}(),R=function(){var p=[];return D&&D.length&&D.forEach(function(i){p.push((0,f.jsx)("li",{className:"item",children:(0,f.jsxs)("div",{className:i.current?"style current":"style",children:[(0,f.jsx)("div",{className:"checkbox_input",onClick:function(){return B(i)},children:(0,f.jsx)("span",{className:"checkbox_inner"})}),(0,f.jsx)("div",{className:"img-box",onClick:function(){return B(i)},children:(0,f.jsx)($.Z,{width:160,src:"".concat(i.url).concat(ee.Z.w_160),preview:!0})}),(0,f.jsx)("div",{className:"line"}),(0,f.jsxs)("div",{className:"tool",children:[(0,f.jsx)(Z.Z,{onClick:function(){return z(i)}}),(0,f.jsx)(re.Z,{onClick:function(){return Q(i)}})]}),(0,f.jsx)("div",{className:"line"}),(0,f.jsx)("div",{className:"title ellipsis",title:i.filename,onClick:function(){return B(i)},children:i.filename})]})},i.keys))}),p};return(0,f.jsx)("div",{className:"imglist",children:(0,f.jsx)("div",{className:"content",children:(0,f.jsx)("div",{className:"list-owflow",children:(0,f.jsx)("ul",{className:"list-ul",children:D&&R()})})})})}var ae=F},43412:function(pe,T,e){e.r(T),e.d(T,{default:function(){return ye}});var Y=e(15009),r=e.n(Y),q=e(99289),u=e.n(q),ee=e(5574),Z=e.n(ee),re=e(19436),ne=e(29185),K=e(54734),$=e(83266),O=e(90930),f=e(14776),F=e(2453),ae=e(17788),N=e(71230),D=e(15746),b=e(54205),A=e(83622),Q=e(74330),z=e(67294),B=e(35517),R=e(97857),C=e.n(R),p=!1,i="http://127.0.0.1:7001",S="https://api.limeetpet.com",P=function(){var V=p?i:S;return V+"/api/material/upload"},U=e(88484),G=e(78367),k=e(5121),t=e(85893),I=function(V){var h=(0,f.useModel)("material"),x=h.selectFolderDirectory,ce=h.queryFolderMaterialFetch,de={accept:"image/*",action:P(),multiple:!1,data:x,headers:{},withCredentials:!0,showUploadList:!1,directory:!1,maxCount:1,method:"post",onStart:function(){var m=u()(r()().mark(function s(n){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:console.log("onStart",n,n.name);case 1:case"end":return l.stop()}},s)}));function o(s){return m.apply(this,arguments)}return o}(),onSuccess:function(){var m=u()(r()().mark(function s(n,c){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return F.ZP.success("".concat(c.name," \u4E0A\u4F20\u6210\u529F\uFF01")),a.next=3,ce(x,"upload");case 3:console.log("onSuccess",n,c.name);case 4:case"end":return a.stop()}},s)}));function o(s,n){return m.apply(this,arguments)}return o}(),beforeUpload:function(){var m=u()(r()().mark(function s(n){var c;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(x&&x.is_leaf&&x.is_leaf===1)){a.next=7;break}if(c="image/png,image/gif,image/jpg,image/jpeg",!(c.indexOf(n.type)<0)){a.next=5;break}return F.ZP.error("".concat(n.name," \u4E0D\u662Fjpg/jpeg/gif/png\u683C\u5F0F")),a.abrupt("return",!1);case 5:a.next=8;break;case 7:F.ZP.error("\u5F53\u524D\u6587\u4EF6\u5939\u4E0D\u662F\u53F6\u5B50\u76EE\u5F55");case 8:case"end":return a.stop()}},s)}));function o(s){return m.apply(this,arguments)}return o}(),onError:function(){var m=u()(r()().mark(function s(n){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:console.log("onError",n),F.ZP.error("\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");case 2:case"end":return l.stop()}},s)}));function o(s){return m.apply(this,arguments)}return o}(),onProgress:function(){var m=u()(r()().mark(function s(n,c){var l;return r()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:l=n.percent,console.log("onProgress","".concat(l,"%"),c.name);case 2:case"end":return g.stop()}},s)}));function o(s,n){return m.apply(this,arguments)}return o}(),customRequest:function(){var m=u()(r()().mark(function s(n){var c,l,a,g,te,se,le,oe,X,M;return r()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:c=n.action,l=n.data,a=n.file,g=n.filename,te=n.headers,se=n.onError,le=n.onProgress,oe=n.onSuccess,X=n.withCredentials,M=new FormData,l&&Object.keys(l).forEach(function(w){M.append(w,l[w])}),M.append(g,a),k.Z.post(c,M,{withCredentials:X,headers:te,onUploadProgress:function(L){var W=L.total,fe=W===void 0?1:W,me=L.loaded;le({percent:Math.round(me/fe*100).toFixed(2)},a)}}).then(function(w){var L=w.data;oe(L,a)}).catch(se);case 5:case"end":return H.stop()}},s)}));function o(s){return m.apply(this,arguments)}return o}()};return(0,t.jsx)("div",{className:"uploadfile",children:(0,t.jsx)(G.Z,C()(C()({},de),{},{children:(0,t.jsx)(A.ZP,{icon:(0,t.jsx)(U.Z,{}),disabled:!(V.selectedKeys&&V.selectedKeys[0]),children:"\u4E0A\u4F20\u56FE\u7247"})}))})},_e=I,Fe=function(V){var h=(0,f.useModel)("material"),x=h.selectFolderDirectory,ce=h.queryFolderMaterialFetch,de={accept:"image/*",action:P(),multiple:!1,data:x,headers:{},withCredentials:!0,showUploadList:!1,directory:!0,maxCount:1,method:"post",onStart:function(){var m=u()(r()().mark(function s(n){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:console.log("onStart",n,n.name);case 1:case"end":return l.stop()}},s)}));function o(s){return m.apply(this,arguments)}return o}(),onSuccess:function(){var m=u()(r()().mark(function s(n,c){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return F.ZP.success("".concat(c.name," \u4E0A\u4F20\u6210\u529F\uFF01")),a.next=3,ce(x,"upload");case 3:console.log("onSuccess",n,c.name);case 4:case"end":return a.stop()}},s)}));function o(s,n){return m.apply(this,arguments)}return o}(),beforeUpload:function(){var m=u()(r()().mark(function s(n){var c;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(x&&x.is_leaf&&x.is_leaf===1)){a.next=7;break}if(c="image/png,image/gif,image/jpg,image/jpeg",!(c.indexOf(n.type)<0)){a.next=5;break}return F.ZP.error("".concat(n.name," \u4E0D\u662Fjpg/jpeg/gif/png\u683C\u5F0F")),a.abrupt("return",!1);case 5:a.next=8;break;case 7:F.ZP.error("\u5F53\u524D\u6587\u4EF6\u5939\u4E0D\u662F\u53F6\u5B50\u76EE\u5F55");case 8:case"end":return a.stop()}},s)}));function o(s){return m.apply(this,arguments)}return o}(),onError:function(){var m=u()(r()().mark(function s(n){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:console.log("onError",n),F.ZP.error("\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");case 2:case"end":return l.stop()}},s)}));function o(s){return m.apply(this,arguments)}return o}(),onProgress:function(){var m=u()(r()().mark(function s(n,c){var l;return r()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:l=n.percent,console.log("onProgress","".concat(l,"%"),c.name);case 2:case"end":return g.stop()}},s)}));function o(s,n){return m.apply(this,arguments)}return o}(),customRequest:function(){var m=u()(r()().mark(function s(n){var c,l,a,g,te,se,le,oe,X,M;return r()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:c=n.action,l=n.data,a=n.file,g=n.filename,te=n.headers,se=n.onError,le=n.onProgress,oe=n.onSuccess,X=n.withCredentials,M=new FormData,l&&Object.keys(l).forEach(function(w){M.append(w,l[w])}),M.append(g,a),k.Z.post(c,M,{withCredentials:X,headers:te,onUploadProgress:function(L){var W=L.total,fe=W===void 0?1:W,me=L.loaded;le({percent:Math.round(me/fe*100).toFixed(2)},a)}}).then(function(w){var L=w.data;oe(L,a)}).catch(se);case 5:case"end":return H.stop()}},s)}));function o(s){return m.apply(this,arguments)}return o}()};return(0,t.jsx)("div",{className:"uploadfiles",children:(0,t.jsx)(G.Z,C()(C()({},de),{},{children:(0,t.jsx)(A.ZP,{icon:(0,t.jsx)(U.Z,{}),disabled:!(V.selectedKeys&&V.selectedKeys[0]),children:"\u6587\u4EF6\u5939\u56FE\u7247\u4E0A\u4F20"})}))})},je=Fe,ge={label:""};function Ee(){var j=(0,f.useModel)("material"),V=j.queryFolderFetch,h=j.selectFolderDirectory,x=j.createFolderFetch,ce=j.editFolderFetch,de=j.delFolderFetch,m=j.queryFolderMaterialFetch,o=j.selectedKeys,s=j.setSelectedKeys,n=j.setSelectFolderDirectory,c=j.folderDirectoryRowsTree,l=j.grandParentKeys,a=j.setOperateFolderDirectory,g=j.operateFolderDirectory,te=j.setImageList,se=(0,f.useModel)("material"),le=se.isLoading,oe=(0,z.useState)(!1),X=Z()(oe,2),M=X[0],he=X[1],H=(0,z.useState)(!1),w=Z()(H,2),L=w[0],W=w[1],fe=function(){var _=u()(r()().mark(function v(){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:W(!1),a(ge);case 2:case"end":return d.stop()}},v)}));return function(){return _.apply(this,arguments)}}(),me=function(){var _=u()(r()().mark(function v(){var E,d;return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(h&&g)){y.next=10;break}if(!M){y.next=7;break}return E=Object.assign({},h,g),y.next=5,ce(E);case 5:y.next=10;break;case 7:return d=Object.assign({},g,{father_key:h.key,key_path:h.keys&&h.keys.join("/"),is_leaf:1,active:!1,is_default:!1}),y.next=10,x(d);case 10:W(!1);case 11:case"end":return y.stop()}},v)}));return function(){return _.apply(this,arguments)}}(),De=function(){var _=u()(r()().mark(function v(){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:he(!1),W(!0),a(ge);case 3:case"end":return d.stop()}},v)}));return function(){return _.apply(this,arguments)}}(),Ce=function(){var _=u()(r()().mark(function v(){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:h?(he(!0),W(!0),a(h)):F.ZP.info("\u9009\u62E9\u5F53\u524D\u6587\u4EF6\u5939");case 1:case"end":return d.stop()}},v)}));return function(){return _.apply(this,arguments)}}(),Pe=function(){var _=u()(r()().mark(function v(E){var d,J;return r()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:M?(d=Object.assign({},h,{label:E,title:E}),a(d)):(J=Object.assign({},{label:E,title:E}),a(J));case 1:case"end":return ie.stop()}},v)}));return function(E){return _.apply(this,arguments)}}(),we=function(){var _=u()(r()().mark(function v(){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:h&&h.key?ae.Z.confirm({title:"\u786E\u8BA4",content:"\u786E\u8BA4\u5220\u9664",onOk:function(){var J=u()(r()().mark(function ie(){return r()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.next=2,de(h);case 2:case"end":return ve.stop()}},ie)}));function y(){return J.apply(this,arguments)}return y}(),onCancel:function(){console.log("Cancel")}}):F.ZP.info("\u9009\u62E9\u5F53\u524D\u6587\u4EF6\u5939");case 1:case"end":return d.stop()}},v)}));return function(){return _.apply(this,arguments)}}(),Oe=function(){var _=u()(r()().mark(function v(E,d){var J,y;return r()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(console.log("selectedKeys:",E),console.log("selectedKeys e:",d),!o.includes(d.node.key)){ue.next=8;break}s([]),te([]),console.log("\u53D6\u6D88\u9009\u62E9"),ue.next=15;break;case 8:return J=l(d.node),y=Object.assign({},d.node,{keys:J}),console.log("currentItemKeys:",y),n(y),s(E),ue.next=15,m(y);case 15:case"end":return ue.stop()}},v)}));return function(E,d){return _.apply(this,arguments)}}();return(0,z.useEffect)(function(){V()},[]),console.log("folderDirectoryRowsTree:",c),console.log("selectFolderDirectory:",h),console.log("selectedKeys:",o[0]),console.log("isLoading:",le),(0,t.jsx)(O._z,{children:(0,t.jsxs)("div",{className:"page",children:[(0,t.jsxs)("div",{className:"material",children:[(0,t.jsx)(re.Z,{}),(0,t.jsx)("div",{className:"content",children:(0,t.jsxs)(N.Z,{children:[(0,t.jsx)(D.Z,{span:5,children:(0,t.jsxs)("div",{className:"folder-menu",children:[(0,t.jsxs)("div",{className:"header",children:[(0,t.jsx)(K.Z,{})," \u6587\u4EF6\u76EE\u5F55"]}),(0,t.jsx)("div",{className:"menu-wrap",children:c&&(0,t.jsx)(b.Z,{treeData:c,selectedKeys:o,onSelect:Oe,showLine:!0,selectable:!0,checkable:!1})})]})}),(0,t.jsx)(D.Z,{span:19,children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)("div",{className:"header",children:[(0,t.jsx)(A.ZP,{onClick:function(){return we()},disabled:!(o&&o[0]),children:"\u5220\u9664\u6587\u4EF6\u5939"}),(0,t.jsx)(A.ZP,{onClick:function(){return Ce()},disabled:!(o&&o[0]),children:"\u7F16\u8F91\u6587\u4EF6\u5939"}),(0,t.jsx)(A.ZP,{disabled:!(o&&o[0]),icon:(0,t.jsx)($.Z,{}),onClick:function(){return De()},children:"\u65B0\u5EFA\u6587\u4EF6\u76EE\u5F55"}),(0,t.jsx)(_e,{selectedKeys:o}),(0,t.jsx)(je,{selectedKeys:o})]}),(0,t.jsx)("div",{children:h&&h.is_leaf===1?(0,t.jsx)(B.Z,{}):(0,t.jsx)("div",{children:"...\u4E0D\u662F\u53F6\u5B50\u8282\u70B9..."})}),h&&(0,t.jsx)(ae.Z,{title:M?"\u7F16\u8F91\u6587\u4EF6\u76EE\u5F55":"\u6DFB\u52A0\u6587\u4EF6\u76EE\u5F55",open:L,width:500,onOk:function(){return me()},onCancel:function(){return fe()},children:(0,t.jsx)("div",{className:"content",children:(0,t.jsxs)("div",{className:"form-item",children:[(0,t.jsx)("span",{className:"label",children:"\u6587\u4EF6\u5939\u540D\u79F0: "}),(0,t.jsx)(ne.Z,{placeholder:"\u6587\u4EF6\u5939\u540D\u79F0",style:{width:250},value:g&&g.label,onChange:Pe})]})})})]})})]})})]}),(0,t.jsx)(Q.Z,{size:"large",fullscreen:!0,spinning:!1,tip:"\u52A0\u8F7D\u4E2D..."})]})})}var ye=Ee}}]);
