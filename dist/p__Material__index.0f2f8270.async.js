"use strict";(self.webpackChunkaffiliate_traffic=self.webpackChunkaffiliate_traffic||[]).push([[1910],{19436:function(me,L,e){var q=e(15009),r=e.n(q),ee=e(99289),u=e.n(ee),re=e(5574),T=e.n(re),ne=e(1848),ae=e(71230),I=e(15746),K=e(67294),c=e(85893),z={name:"",accountId:"",adultContent:0,createdAt:"",defaultState:!1,projectId:"",id:0,describe:"",image:"",kind:""},F=function(){var Q=(0,K.useState)(z),G=T()(Q,2),O=G[0],y=G[1],V=function(){var te=u()(r()().mark(function $(){var A;return r()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,ne.Io)();case 2:A=w.sent,A&&A.status===200&&A.data&&y(A.data);case 4:case"end":return w.stop()}},$)}));return function(){return te.apply(this,arguments)}}();return(0,K.useEffect)(function(){V()},[]),(0,c.jsx)(ae.Z,{children:(0,c.jsx)(I.Z,{children:(0,c.jsxs)("p",{children:["\u5F53\u524D\u9879\u76EE\uFF1A","".concat(O&&O.name?O.name:"\u65E0\u9879\u76EE")]})})})};L.Z=F},29185:function(me,L,e){var q=e(97857),r=e.n(q),ee=e(5574),u=e.n(ee),re=e(55102),T=e(67294),ne=e(85893);function ae(I){var K=I.value,c=I.onChange,z=(0,T.useState)(K),F=u()(z,2),J=F[0],Q=F[1],G=(0,T.useState)(!1),O=u()(G,2),y=O[0],V=O[1],te=navigator.userAgent.indexOf("WebKit")>-1;(0,T.useEffect)(function(){Q(K)},[K]);var $=function(){V(!0)},A=function(M){V(!1),te&&(c==null||c(M.currentTarget.value))},ce=function(M){var D=M.target.value;Q(D),y||c==null||c(D)};return(0,ne.jsx)(re.Z,r()(r()({},I),{},{value:J,onChange:ce,onCompositionStart:$,onCompositionEnd:A}))}L.Z=T.memo(ae)},4518:function(me,L){L.Z={w_50:"?x-oss-process=image/resize,w_50,m_lfit",w_100:"?x-oss-process=image/resize,w_100,m_lfit",w_160:"?x-oss-process=image/resize,w_160,m_lfit"}},35517:function(me,L,e){e.d(L,{Z:function(){return F}});var q=e(15009),r=e.n(q),ee=e(99289),u=e.n(ee),re=e(4518),T=e(82061),ne=e(69753),ae=e(14776),I=e(17788),K=e(79607),c=e(85893);function z(J){console.log("props:",J);var Q=J.from,G=[],O=(0,ae.useModel)("material"),y=O.imageList,V=O.delRemoteMaterialFetch,te=O.updateOperateMaterial,$=function(){var M=u()(r()().mark(function D(i){return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:fetch(i.url).then(function(S){return S.blob()}).then(function(S){var H=URL.createObjectURL(new Blob([S])),a=document.createElement("a");a.href=H,a.download="image.png",document.body.appendChild(a),a.click(),URL.revokeObjectURL(H),a.remove()});case 1:case"end":return C.stop()}},D)}));return function(i){return M.apply(this,arguments)}}(),A=function(){var M=u()(r()().mark(function D(i){return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:i.status===1?I.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u5F7B\u5E95\u5220\u9664\u670D\u52A1\u6587\u4EF6\uFF0C\u8D44\u6E90\u5730\u5740\u5C06\u5931\u53BB\u8BBF\u95EE",onOk:function(){var S=u()(r()().mark(function a(){return r()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,V(i);case 2:case"end":return R.stop()}},a)}));function H(){return S.apply(this,arguments)}return H}(),onCancel:function(){console.log("Cancel")}}):I.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u5F53\u524D\u7684\u7D20\u6750\u5F7B\u5E95\u5220\u9664\uFF0C\u5F15\u7528\u9875\u9762\u5931\u6548",onOk:function(){var S=u()(r()().mark(function a(){return r()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,V(i);case 2:case"end":return R.stop()}},a)}));function H(){return S.apply(this,arguments)}return H}(),onCancel:function(){console.log("Cancel")}});case 1:case"end":return C.stop()}},D)}));return function(i){return M.apply(this,arguments)}}(),ce=function(){var M=u()(r()().mark(function D(i){return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:console.log("currentItem1:",i),i&&i.keys&&y&&y.length>0&&(te(i),G.push(i),console.log("currentItem2:",i));case 2:case"end":return C.stop()}},D)}));return function(i){return M.apply(this,arguments)}}(),w=function(){var D=[];return y&&y.length&&y.forEach(function(i){D.push((0,c.jsx)("li",{className:"item",children:(0,c.jsxs)("div",{className:i.current?"style current":"style",children:[Q==="selectModal"&&(0,c.jsx)("div",{className:"checkbox_input",onClick:function(){return ce(i)},children:(0,c.jsx)("span",{className:"checkbox_inner"})}),(0,c.jsx)("div",{className:"img-box",children:(0,c.jsx)(K.Z,{width:160,src:"".concat(i.url).concat(re.Z.w_160),preview:{src:i.url}})}),(0,c.jsx)("div",{className:"line"}),(0,c.jsxs)("div",{className:"tool",children:[(0,c.jsxs)("span",{className:"tx",children:[i.width,"x",i.height," | ",i.fileSize," | ",i.extension]}),(0,c.jsx)(T.Z,{onClick:function(){return A(i)}}),(0,c.jsx)(ne.Z,{onClick:function(){return $(i)}})]}),(0,c.jsx)("div",{className:"line"}),(0,c.jsx)("div",{className:"title ellipsis",title:i.filename,children:i.filename})]})},i.keys))}),D};return(0,c.jsx)("div",{className:"imglist",children:(0,c.jsx)("div",{className:"content",children:(0,c.jsx)("div",{className:"list-owflow",children:(0,c.jsx)("ul",{className:"list-ul",children:y&&w()})})})})}var F=z},43412:function(me,L,e){e.r(L),e.d(L,{default:function(){return De}});var q=e(15009),r=e.n(q),ee=e(99289),u=e.n(ee),re=e(5574),T=e.n(re),ne=e(19436),ae=e(29185),I=e(54734),K=e(83266),c=e(90930),z=e(14776),F=e(2453),J=e(17788),Q=e(71230),G=e(15746),O=e(54205),y=e(83622),V=e(32983),te=e(74330),$=e(67294),A=e(35517),ce=e(97857),w=e.n(ce),M=!1,D="http://127.0.0.1:7001",i="https://api.limeetpet.com",X=function(){var N=M?D:i;return N+"/api/material/upload"},C=e(88484),S=e(78367),H=e(5121),a=e(85893),ge=function(N){var se=(0,z.useModel)("material"),f=se.selectFolderDirectory,de=se.queryFolderMaterialFetch,fe={accept:"image/*",action:X(),multiple:!1,data:f,headers:{},withCredentials:!0,showUploadList:!1,directory:!1,maxCount:1,method:"post",onStart:function(){var h=u()(r()().mark(function t(n){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:console.log("onStart",n,n.name);case 1:case"end":return s.stop()}},t)}));function m(t){return h.apply(this,arguments)}return m}(),onSuccess:function(){var h=u()(r()().mark(function t(n,d){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return F.ZP.success("".concat(d.name," \u4E0A\u4F20\u6210\u529F\uFF01")),l.next=3,de(f,"upload");case 3:console.log("onSuccess",n,d.name);case 4:case"end":return l.stop()}},t)}));function m(t,n){return h.apply(this,arguments)}return m}(),beforeUpload:function(){var h=u()(r()().mark(function t(n){var d;return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(f&&f.is_leaf&&f.is_leaf===1)){l.next=7;break}if(d="image/png,image/gif,image/jpg,image/jpeg",!(d.indexOf(n.type)<0)){l.next=5;break}return F.ZP.error("".concat(n.name," \u4E0D\u662Fjpg/jpeg/gif/png\u683C\u5F0F")),l.abrupt("return",!1);case 5:l.next=8;break;case 7:F.ZP.error("\u5F53\u524D\u6587\u4EF6\u5939\u4E0D\u662F\u53F6\u5B50\u76EE\u5F55");case 8:case"end":return l.stop()}},t)}));function m(t){return h.apply(this,arguments)}return m}(),onError:function(){var h=u()(r()().mark(function t(n){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:console.log("onError",n),F.ZP.error("\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");case 2:case"end":return s.stop()}},t)}));function m(t){return h.apply(this,arguments)}return m}(),onProgress:function(){var h=u()(r()().mark(function t(n,d){var s;return r()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:s=n.percent,console.log("onProgress","".concat(s,"%"),d.name);case 2:case"end":return g.stop()}},t)}));function m(t,n){return h.apply(this,arguments)}return m}(),customRequest:function(){var h=u()(r()().mark(function t(n){var d,s,l,g,U,le,oe,Y,B,k;return r()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:d=n.action,s=n.data,l=n.file,g=n.filename,U=n.headers,le=n.onError,oe=n.onProgress,Y=n.onSuccess,B=n.withCredentials,k=new FormData,s&&Object.keys(s).forEach(function(x){k.append(x,s[x])}),k.append(g,l),H.Z.post(d,k,{withCredentials:B,headers:U,onUploadProgress:function(P){var ue=P.total,pe=ue===void 0?1:ue,he=P.loaded;oe({percent:Math.round(he/pe*100).toFixed(2)},l)}}).then(function(x){var P=x.data;Y(P,l)}).catch(le);case 5:case"end":return W.stop()}},t)}));function m(t){return h.apply(this,arguments)}return m}()};return(0,a.jsx)("div",{className:"uploadfile",children:(0,a.jsx)(S.Z,w()(w()({},fe),{},{children:(0,a.jsx)(y.ZP,{icon:(0,a.jsx)(C.Z,{}),disabled:!(N.selectedKeys&&N.selectedKeys[0]),children:"\u4E0A\u4F20\u56FE\u7247"})}))})},R=ge,je=function(N){var se=(0,z.useModel)("material"),f=se.selectFolderDirectory,de=se.queryFolderMaterialFetch,fe={accept:"image/*",action:X(),multiple:!1,data:f,headers:{},withCredentials:!0,showUploadList:!1,directory:!0,maxCount:1,method:"post",onStart:function(){var h=u()(r()().mark(function t(n){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:console.log("onStart",n,n.name);case 1:case"end":return s.stop()}},t)}));function m(t){return h.apply(this,arguments)}return m}(),onSuccess:function(){var h=u()(r()().mark(function t(n,d){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return F.ZP.success("".concat(d.name," \u4E0A\u4F20\u6210\u529F\uFF01")),l.next=3,de(f,"upload");case 3:console.log("onSuccess",n,d.name);case 4:case"end":return l.stop()}},t)}));function m(t,n){return h.apply(this,arguments)}return m}(),beforeUpload:function(){var h=u()(r()().mark(function t(n){var d;return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(f&&f.is_leaf&&f.is_leaf===1)){l.next=7;break}if(d="image/png,image/gif,image/jpg,image/jpeg",!(d.indexOf(n.type)<0)){l.next=5;break}return F.ZP.error("".concat(n.name," \u4E0D\u662Fjpg/jpeg/gif/png\u683C\u5F0F")),l.abrupt("return",!1);case 5:l.next=8;break;case 7:F.ZP.error("\u5F53\u524D\u6587\u4EF6\u5939\u4E0D\u662F\u53F6\u5B50\u76EE\u5F55");case 8:case"end":return l.stop()}},t)}));function m(t){return h.apply(this,arguments)}return m}(),onError:function(){var h=u()(r()().mark(function t(n){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:console.log("onError",n),F.ZP.error("\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");case 2:case"end":return s.stop()}},t)}));function m(t){return h.apply(this,arguments)}return m}(),onProgress:function(){var h=u()(r()().mark(function t(n,d){var s;return r()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:s=n.percent,console.log("onProgress","".concat(s,"%"),d.name);case 2:case"end":return g.stop()}},t)}));function m(t,n){return h.apply(this,arguments)}return m}(),customRequest:function(){var h=u()(r()().mark(function t(n){var d,s,l,g,U,le,oe,Y,B,k;return r()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:d=n.action,s=n.data,l=n.file,g=n.filename,U=n.headers,le=n.onError,oe=n.onProgress,Y=n.onSuccess,B=n.withCredentials,k=new FormData,s&&Object.keys(s).forEach(function(x){k.append(x,s[x])}),k.append(g,l),H.Z.post(d,k,{withCredentials:B,headers:U,onUploadProgress:function(P){var ue=P.total,pe=ue===void 0?1:ue,he=P.loaded;oe({percent:Math.round(he/pe*100).toFixed(2)},l)}}).then(function(x){var P=x.data;Y(P,l)}).catch(le);case 5:case"end":return W.stop()}},t)}));function m(t){return h.apply(this,arguments)}return m}()};return(0,a.jsx)("div",{className:"uploadfiles",children:(0,a.jsx)(S.Z,w()(w()({},fe),{},{children:(0,a.jsx)(y.ZP,{icon:(0,a.jsx)(C.Z,{}),disabled:!(N.selectedKeys&&N.selectedKeys[0]),children:"\u6587\u4EF6\u5939\u56FE\u7247\u4E0A\u4F20"})}))})},Ee=je,Fe={label:""};function ye(){var j=(0,z.useModel)("material"),N=j.isLoading,se=j.queryFolderFetch,f=j.selectFolderDirectory,de=j.createFolderFetch,fe=j.editFolderFetch,h=j.delFolderFetch,m=j.queryFolderMaterialFetch,t=j.selectedKeys,n=j.setSelectedKeys,d=j.setSelectFolderDirectory,s=j.folderDirectoryRowsTree,l=j.grandParentKeys,g=j.setOperateFolderDirectory,U=j.operateFolderDirectory,le=j.setImageList,oe=(0,$.useState)(!1),Y=T()(oe,2),B=Y[0],k=Y[1],_e=(0,$.useState)(!1),W=T()(_e,2),x=W[0],P=W[1],ue=function(){var v=u()(r()().mark(function p(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:P(!1),g(Fe);case 2:case"end":return o.stop()}},p)}));return function(){return v.apply(this,arguments)}}(),pe=function(){var v=u()(r()().mark(function p(){var _,o,Z;return r()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(f&&U)){E.next=12;break}if(!B){E.next=7;break}return _=Object.assign({},f,U),E.next=5,fe(_);case 5:E.next=10;break;case 7:return o=Object.assign({},U,{father_key:f.key,key_path:f.keys&&f.keys.join("/"),is_leaf:1,active:!1,is_default:!1}),E.next=10,de(o);case 10:E.next=16;break;case 12:if(B){E.next=16;break}return Z=Object.assign({},U,{father_key:"",key_path:"",is_leaf:1,active:!1,is_default:!1}),E.next=16,de(Z);case 16:P(!1);case 17:case"end":return E.stop()}},p)}));return function(){return v.apply(this,arguments)}}(),he=function(){var v=u()(r()().mark(function p(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:k(!1),P(!0),g(Fe);case 3:case"end":return o.stop()}},p)}));return function(){return v.apply(this,arguments)}}(),we=function(){var v=u()(r()().mark(function p(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:f?(k(!0),P(!0),g(f)):F.ZP.info("\u9009\u62E9\u5F53\u524D\u6587\u4EF6\u5939");case 1:case"end":return o.stop()}},p)}));return function(){return v.apply(this,arguments)}}(),Ce=function(){var v=u()(r()().mark(function p(_){var o,Z;return r()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:B?(o=Object.assign({},f,{label:_,title:_}),g(o)):(Z=Object.assign({},{label:_,title:_}),g(Z));case 1:case"end":return E.stop()}},p)}));return function(_){return v.apply(this,arguments)}}(),Pe=function(){var v=u()(r()().mark(function p(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:f&&f.key?f.is_leaf===1?J.Z.confirm({title:"\u786E\u8BA4",content:"\u786E\u8BA4\u5220\u9664",onOk:function(){var Z=u()(r()().mark(function E(){return r()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.next=2,h(f);case 2:case"end":return ve.stop()}},E)}));function b(){return Z.apply(this,arguments)}return b}(),onCancel:function(){console.log("Cancel")}}):F.ZP.info("\u975E\u53F6\u5B50\u8282\u70B9\u65E0\u6CD5\u5220\u9664"):F.ZP.info("\u9009\u62E9\u5F53\u524D\u6587\u4EF6\u5939");case 1:case"end":return o.stop()}},p)}));return function(){return v.apply(this,arguments)}}(),xe=function(){var v=u()(r()().mark(function p(_,o){var Z,b;return r()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(console.log("selectedKeys:",_),console.log("selectedKeys e:",o),!t.includes(o.node.key)){ie.next=8;break}n([]),le([]),console.log("\u53D6\u6D88\u9009\u62E9"),ie.next=15;break;case 8:return Z=l(o.node),b=Object.assign({},o.node,{keys:Z}),console.log("currentItemKeys:",b),d(b),n(_),ie.next=15,m(b);case 15:case"end":return ie.stop()}},p)}));return function(_,o){return v.apply(this,arguments)}}(),Oe=function(){var v=u()(r()().mark(function p(_,o){return r()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:console.log("expandedKeys:",_),console.log("e:",o);case 2:case"end":return b.stop()}},p)}));return function(_,o){return v.apply(this,arguments)}}(),Me=function(){var v=u()(r()().mark(function p(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:n([]),g({}),d({});case 3:case"end":return o.stop()}},p)}));return function(){return v.apply(this,arguments)}}();return(0,$.useEffect)(function(){se()},[]),console.log("folderDirectoryRowsTree:",s),console.log("selectFolderDirectory:",f),console.log("selectedKeys:",t),console.log("isLoading:",N),(0,a.jsx)(c._z,{children:(0,a.jsxs)("div",{className:"page",children:[(0,a.jsxs)("div",{className:"material",children:[(0,a.jsx)(ne.Z,{}),(0,a.jsx)("div",{className:"content",children:(0,a.jsxs)(Q.Z,{children:[(0,a.jsx)(G.Z,{span:5,children:(0,a.jsxs)("div",{className:"folder-menu",children:[(0,a.jsxs)("div",{className:"header",children:[(0,a.jsx)(I.Z,{})," \u6587\u4EF6\u76EE\u5F55"," ",(0,a.jsx)("span",{onClick:Me,className:"rest-select",children:"(\u8FD4\u56DE\u8DDF\u8282\u70B9)"})]}),(0,a.jsx)("div",{className:"menu-wrap",children:s&&(0,a.jsx)(O.Z,{treeData:s,selectedKeys:t,onSelect:xe,onExpand:Oe,showLine:!0,selectable:!0,checkable:!1})})]})}),(0,a.jsx)(G.Z,{span:19,children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"header",children:[(0,a.jsx)(y.ZP,{onClick:function(){return Pe()},disabled:!(t&&t[0]),children:"\u5220\u9664\u6587\u4EF6\u5939"}),(0,a.jsx)(y.ZP,{onClick:function(){return we()},disabled:!(t&&t[0]),children:"\u7F16\u8F91\u6587\u4EF6\u5939"}),(0,a.jsx)(y.ZP,{icon:(0,a.jsx)(K.Z,{}),onClick:function(){return he()},children:"\u65B0\u5EFA\u6587\u4EF6\u76EE\u5F55"}),(0,a.jsx)(R,{selectedKeys:t}),(0,a.jsx)(Ee,{selectedKeys:t})]}),(0,a.jsx)("div",{children:f&&f.is_leaf===1?(0,a.jsx)(A.Z,{from:"material"}):(0,a.jsx)("div",{className:"no-leaf",children:(0,a.jsx)(V.Z,{description:"...\u4E0D\u662F\u53F6\u5B50\u8282\u70B9\uFF0C\u65E0\u56FE\u7247\u7D20\u6750..."})})}),(0,a.jsx)(J.Z,{title:B?"\u7F16\u8F91\u6587\u4EF6\u76EE\u5F55":"\u6DFB\u52A0\u6587\u4EF6\u76EE\u5F55",open:x,width:500,onOk:function(){return pe()},onCancel:function(){return ue()},children:(0,a.jsx)("div",{className:"content",children:(0,a.jsxs)("div",{className:"form-item",children:[(0,a.jsx)("span",{className:"label",children:"\u6587\u4EF6\u5939\u540D\u79F0: "}),(0,a.jsx)(ae.Z,{placeholder:"\u6587\u4EF6\u5939\u540D\u79F0",style:{width:250},value:U&&U.label,onChange:Ce})]})})})]})})]})})]}),(0,a.jsx)(te.Z,{size:"large",fullscreen:!0,spinning:N,tip:"\u52A0\u8F7D\u4E2D..."})]})})}var De=ye}}]);
