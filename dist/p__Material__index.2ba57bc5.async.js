"use strict";(self.webpackChunkaffiliate_traffic=self.webpackChunkaffiliate_traffic||[]).push([[1910],{19436:function(pe,K,e){var X=e(15009),r=e.n(X),Y=e(99289),i=e.n(Y),q=e(5574),T=e.n(q),ee=e(1848),re=e(71230),$=e(15746),N=e(67294),c=e(85893),V={name:"",accountId:"",adultContent:0,createdAt:"",defaultState:!1,projectId:"",id:0,describe:"",image:"",kind:""},j=function(){var B=(0,N.useState)(V),D=T()(B,2),A=D[0],R=D[1],J=function(){var ae=i()(r()().mark(function x(){var L;return r()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,ee.Io)();case 2:L=h.sent,L&&L.status===200&&L.data&&R(L.data);case 4:case"end":return h.stop()}},x)}));return function(){return ae.apply(this,arguments)}}();return(0,N.useEffect)(function(){J()},[]),(0,c.jsx)(re.Z,{children:(0,c.jsx)($.Z,{children:(0,c.jsxs)("p",{children:["\u5F53\u524D\u9879\u76EE\uFF1A","".concat(A&&A.name?A.name:"\u65E0\u9879\u76EE")]})})})};K.Z=j},29185:function(pe,K,e){var X=e(97857),r=e.n(X),Y=e(5574),i=e.n(Y),q=e(55102),T=e(67294),ee=e(85893);function re($){var N=$.value,c=$.onChange,V=(0,T.useState)(N),j=i()(V,2),ne=j[0],B=j[1],D=(0,T.useState)(!1),A=i()(D,2),R=A[0],J=A[1],ae=navigator.userAgent.indexOf("WebKit")>-1;(0,T.useEffect)(function(){B(N)},[N]);var x=function(){J(!0)},L=function(o){J(!1),ae&&(c==null||c(o.currentTarget.value))},I=function(o){var O=o.target.value;B(O),R||c==null||c(O)};return(0,ee.jsx)(q.Z,r()(r()({},$),{},{value:ne,onChange:I,onCompositionStart:x,onCompositionEnd:L}))}K.Z=T.memo(re)},4518:function(pe,K){K.Z={w_50:"?x-oss-process=image/resize,w_50,m_lfit",w_100:"?x-oss-process=image/resize,w_100,m_lfit",w_160:"?x-oss-process=image/resize,w_160,m_lfit"}},35517:function(pe,K,e){e.d(K,{Z:function(){return j}});var X=e(15009),r=e.n(X),Y=e(99289),i=e.n(Y),q=e(4518),T=e(82061),ee=e(69753),re=e(14776),$=e(17788),N=e(79607),c=e(85893);function V(){var ne=[],B=(0,re.useModel)("material"),D=B.imageList,A=B.delRemoteMaterialFetch,R=B.updateOperateMaterial,J=function(){var I=i()(r()().mark(function h(o){return r()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:fetch(o.url).then(function(M){return M.blob()}).then(function(M){var H=URL.createObjectURL(new Blob([M])),k=document.createElement("a");k.href=H,k.download="image.png",document.body.appendChild(k),k.click(),URL.revokeObjectURL(H),k.remove()});case 1:case"end":return w.stop()}},h)}));return function(o){return I.apply(this,arguments)}}(),ae=function(){var I=i()(r()().mark(function h(o){return r()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:o.status===1?$.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u5F7B\u5E95\u5220\u9664\u670D\u52A1\u6587\u4EF6\uFF0C\u8D44\u6E90\u5730\u5740\u5C06\u5931\u53BB\u8BBF\u95EE",onOk:function(){var M=i()(r()().mark(function k(){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,A(o);case 2:case"end":return a.stop()}},k)}));function H(){return M.apply(this,arguments)}return H}(),onCancel:function(){console.log("Cancel")}}):$.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u5F53\u524D\u7684\u7D20\u6750\u5F7B\u5E95\u5220\u9664\uFF0C\u5F15\u7528\u9875\u9762\u5931\u6548",onOk:function(){var M=i()(r()().mark(function k(){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,A(o);case 2:case"end":return a.stop()}},k)}));function H(){return M.apply(this,arguments)}return H}(),onCancel:function(){console.log("Cancel")}});case 1:case"end":return w.stop()}},h)}));return function(o){return I.apply(this,arguments)}}(),x=function(){var I=i()(r()().mark(function h(o){return r()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:console.log("currentItem1:",o),o&&o.keys&&D&&D.length>0&&(R(o),ne.push(o),console.log("currentItem2:",o));case 2:case"end":return w.stop()}},h)}));return function(o){return I.apply(this,arguments)}}(),L=function(){var h=[];return D&&D.length&&D.forEach(function(o){h.push((0,c.jsx)("li",{className:"item",children:(0,c.jsxs)("div",{className:o.current?"style current":"style",children:[(0,c.jsx)("div",{className:"checkbox_input",onClick:function(){return x(o)},children:(0,c.jsx)("span",{className:"checkbox_inner"})}),(0,c.jsx)("div",{className:"img-box",onClick:function(){return x(o)},children:(0,c.jsx)(N.Z,{width:160,src:"".concat(o.url).concat(q.Z.w_160),preview:{src:o.url}})}),(0,c.jsx)("div",{className:"line"}),(0,c.jsxs)("div",{className:"tool",children:[(0,c.jsxs)("span",{className:"tx",children:[o.width,"x",o.height," | ",o.fileSize," | ",o.extension]}),(0,c.jsx)(T.Z,{onClick:function(){return ae(o)}}),(0,c.jsx)(ee.Z,{onClick:function(){return J(o)}})]}),(0,c.jsx)("div",{className:"line"}),(0,c.jsx)("div",{className:"title ellipsis",title:o.filename,onClick:function(){return x(o)},children:o.filename})]})},o.keys))}),h};return(0,c.jsx)("div",{className:"imglist",children:(0,c.jsx)("div",{className:"content",children:(0,c.jsx)("div",{className:"list-owflow",children:(0,c.jsx)("ul",{className:"list-ul",children:D&&L()})})})})}var j=V},43412:function(pe,K,e){e.r(K),e.d(K,{default:function(){return De}});var X=e(15009),r=e.n(X),Y=e(99289),i=e.n(Y),q=e(5574),T=e.n(q),ee=e(19436),re=e(29185),$=e(54734),N=e(83266),c=e(90930),V=e(14776),j=e(2453),ne=e(17788),B=e(71230),D=e(15746),A=e(54205),R=e(83622),J=e(32983),ae=e(74330),x=e(67294),L=e(35517),I=e(97857),h=e.n(I),o=!1,O="http://127.0.0.1:7001",w="https://api.limeetpet.com",M=function(){var W=o?O:w;return W+"/api/material/upload"},H=e(88484),k=e(78367),he=e(5121),a=e(85893),_e=function(W){var te=(0,V.useModel)("material"),f=te.selectFolderDirectory,ie=te.queryFolderMaterialFetch,ce={accept:"image/*",action:M(),multiple:!1,data:f,headers:{},withCredentials:!0,showUploadList:!1,directory:!1,maxCount:1,method:"post",onStart:function(){var m=i()(r()().mark(function t(n){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:console.log("onStart",n,n.name);case 1:case"end":return s.stop()}},t)}));function v(t){return m.apply(this,arguments)}return v}(),onSuccess:function(){var m=i()(r()().mark(function t(n,d){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return j.ZP.success("".concat(d.name," \u4E0A\u4F20\u6210\u529F\uFF01")),l.next=3,ie(f,"upload");case 3:console.log("onSuccess",n,d.name);case 4:case"end":return l.stop()}},t)}));function v(t,n){return m.apply(this,arguments)}return v}(),beforeUpload:function(){var m=i()(r()().mark(function t(n){var d;return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(f&&f.is_leaf&&f.is_leaf===1)){l.next=7;break}if(d="image/png,image/gif,image/jpg,image/jpeg",!(d.indexOf(n.type)<0)){l.next=5;break}return j.ZP.error("".concat(n.name," \u4E0D\u662Fjpg/jpeg/gif/png\u683C\u5F0F")),l.abrupt("return",!1);case 5:l.next=8;break;case 7:j.ZP.error("\u5F53\u524D\u6587\u4EF6\u5939\u4E0D\u662F\u53F6\u5B50\u76EE\u5F55");case 8:case"end":return l.stop()}},t)}));function v(t){return m.apply(this,arguments)}return v}(),onError:function(){var m=i()(r()().mark(function t(n){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:console.log("onError",n),j.ZP.error("\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");case 2:case"end":return s.stop()}},t)}));function v(t){return m.apply(this,arguments)}return v}(),onProgress:function(){var m=i()(r()().mark(function t(n,d){var s;return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:s=n.percent,console.log("onProgress","".concat(s,"%"),d.name);case 2:case"end":return _.stop()}},t)}));function v(t,n){return m.apply(this,arguments)}return v}(),customRequest:function(){var m=i()(r()().mark(function t(n){var d,s,l,_,S,se,le,Q,z,U;return r()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:d=n.action,s=n.data,l=n.file,_=n.filename,S=n.headers,se=n.onError,le=n.onProgress,Q=n.onSuccess,z=n.withCredentials,U=new FormData,s&&Object.keys(s).forEach(function(P){U.append(P,s[P])}),U.append(_,l),he.Z.post(d,U,{withCredentials:z,headers:S,onUploadProgress:function(C){var oe=C.total,de=oe===void 0?1:oe,fe=C.loaded;le({percent:Math.round(fe/de*100).toFixed(2)},l)}}).then(function(P){var C=P.data;Q(C,l)}).catch(se);case 5:case"end":return G.stop()}},t)}));function v(t){return m.apply(this,arguments)}return v}()};return(0,a.jsx)("div",{className:"uploadfile",children:(0,a.jsx)(k.Z,h()(h()({},ce),{},{children:(0,a.jsx)(R.ZP,{icon:(0,a.jsx)(H.Z,{}),disabled:!(W.selectedKeys&&W.selectedKeys[0]),children:"\u4E0A\u4F20\u56FE\u7247"})}))})},Fe=_e,je=function(W){var te=(0,V.useModel)("material"),f=te.selectFolderDirectory,ie=te.queryFolderMaterialFetch,ce={accept:"image/*",action:M(),multiple:!1,data:f,headers:{},withCredentials:!0,showUploadList:!1,directory:!0,maxCount:1,method:"post",onStart:function(){var m=i()(r()().mark(function t(n){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:console.log("onStart",n,n.name);case 1:case"end":return s.stop()}},t)}));function v(t){return m.apply(this,arguments)}return v}(),onSuccess:function(){var m=i()(r()().mark(function t(n,d){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return j.ZP.success("".concat(d.name," \u4E0A\u4F20\u6210\u529F\uFF01")),l.next=3,ie(f,"upload");case 3:console.log("onSuccess",n,d.name);case 4:case"end":return l.stop()}},t)}));function v(t,n){return m.apply(this,arguments)}return v}(),beforeUpload:function(){var m=i()(r()().mark(function t(n){var d;return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(f&&f.is_leaf&&f.is_leaf===1)){l.next=7;break}if(d="image/png,image/gif,image/jpg,image/jpeg",!(d.indexOf(n.type)<0)){l.next=5;break}return j.ZP.error("".concat(n.name," \u4E0D\u662Fjpg/jpeg/gif/png\u683C\u5F0F")),l.abrupt("return",!1);case 5:l.next=8;break;case 7:j.ZP.error("\u5F53\u524D\u6587\u4EF6\u5939\u4E0D\u662F\u53F6\u5B50\u76EE\u5F55");case 8:case"end":return l.stop()}},t)}));function v(t){return m.apply(this,arguments)}return v}(),onError:function(){var m=i()(r()().mark(function t(n){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:console.log("onError",n),j.ZP.error("\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");case 2:case"end":return s.stop()}},t)}));function v(t){return m.apply(this,arguments)}return v}(),onProgress:function(){var m=i()(r()().mark(function t(n,d){var s;return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:s=n.percent,console.log("onProgress","".concat(s,"%"),d.name);case 2:case"end":return _.stop()}},t)}));function v(t,n){return m.apply(this,arguments)}return v}(),customRequest:function(){var m=i()(r()().mark(function t(n){var d,s,l,_,S,se,le,Q,z,U;return r()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:d=n.action,s=n.data,l=n.file,_=n.filename,S=n.headers,se=n.onError,le=n.onProgress,Q=n.onSuccess,z=n.withCredentials,U=new FormData,s&&Object.keys(s).forEach(function(P){U.append(P,s[P])}),U.append(_,l),he.Z.post(d,U,{withCredentials:z,headers:S,onUploadProgress:function(C){var oe=C.total,de=oe===void 0?1:oe,fe=C.loaded;le({percent:Math.round(fe/de*100).toFixed(2)},l)}}).then(function(P){var C=P.data;Q(C,l)}).catch(se);case 5:case"end":return G.stop()}},t)}));function v(t){return m.apply(this,arguments)}return v}()};return(0,a.jsx)("div",{className:"uploadfiles",children:(0,a.jsx)(k.Z,h()(h()({},ce),{},{children:(0,a.jsx)(R.ZP,{icon:(0,a.jsx)(H.Z,{}),disabled:!(W.selectedKeys&&W.selectedKeys[0]),children:"\u6587\u4EF6\u5939\u56FE\u7247\u4E0A\u4F20"})}))})},Ee=je,ge={label:""};function ye(){var E=(0,V.useModel)("material"),W=E.isLoading,te=E.queryFolderFetch,f=E.selectFolderDirectory,ie=E.createFolderFetch,ce=E.editFolderFetch,m=E.delFolderFetch,v=E.queryFolderMaterialFetch,t=E.selectedKeys,n=E.setSelectedKeys,d=E.setSelectFolderDirectory,s=E.folderDirectoryRowsTree,l=E.grandParentKeys,_=E.setOperateFolderDirectory,S=E.operateFolderDirectory,se=E.setImageList,le=(0,x.useState)(!1),Q=T()(le,2),z=Q[0],U=Q[1],ve=(0,x.useState)(!1),G=T()(ve,2),P=G[0],C=G[1],oe=function(){var g=i()(r()().mark(function p(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:C(!1),_(ge);case 2:case"end":return u.stop()}},p)}));return function(){return g.apply(this,arguments)}}(),de=function(){var g=i()(r()().mark(function p(){var F,u,Z;return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(f&&S)){y.next=12;break}if(!z){y.next=7;break}return F=Object.assign({},f,S),y.next=5,ce(F);case 5:y.next=10;break;case 7:return u=Object.assign({},S,{father_key:f.key,key_path:f.keys&&f.keys.join("/"),is_leaf:1,active:!1,is_default:!1}),y.next=10,ie(u);case 10:y.next=16;break;case 12:if(z){y.next=16;break}return Z=Object.assign({},S,{father_key:"",key_path:"",is_leaf:1,active:!1,is_default:!1}),y.next=16,ie(Z);case 16:C(!1);case 17:case"end":return y.stop()}},p)}));return function(){return g.apply(this,arguments)}}(),fe=function(){var g=i()(r()().mark(function p(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:U(!1),C(!0),_(ge);case 3:case"end":return u.stop()}},p)}));return function(){return g.apply(this,arguments)}}(),Ce=function(){var g=i()(r()().mark(function p(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:f?(U(!0),C(!0),_(f)):j.ZP.info("\u9009\u62E9\u5F53\u524D\u6587\u4EF6\u5939");case 1:case"end":return u.stop()}},p)}));return function(){return g.apply(this,arguments)}}(),we=function(){var g=i()(r()().mark(function p(F){var u,Z;return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:z?(u=Object.assign({},f,{label:F,title:F}),_(u)):(Z=Object.assign({},{label:F,title:F}),_(Z));case 1:case"end":return y.stop()}},p)}));return function(F){return g.apply(this,arguments)}}(),Pe=function(){var g=i()(r()().mark(function p(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:f&&f.key?f.is_leaf===1?ne.Z.confirm({title:"\u786E\u8BA4",content:"\u786E\u8BA4\u5220\u9664",onOk:function(){var Z=i()(r()().mark(function y(){return r()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,m(f);case 2:case"end":return me.stop()}},y)}));function b(){return Z.apply(this,arguments)}return b}(),onCancel:function(){console.log("Cancel")}}):j.ZP.info("\u975E\u53F6\u5B50\u8282\u70B9\u65E0\u6CD5\u5220\u9664"):j.ZP.info("\u9009\u62E9\u5F53\u524D\u6587\u4EF6\u5939");case 1:case"end":return u.stop()}},p)}));return function(){return g.apply(this,arguments)}}(),xe=function(){var g=i()(r()().mark(function p(F,u){var Z,b;return r()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(console.log("selectedKeys:",F),console.log("selectedKeys e:",u),!t.includes(u.node.key)){ue.next=8;break}n([]),se([]),console.log("\u53D6\u6D88\u9009\u62E9"),ue.next=15;break;case 8:return Z=l(u.node),b=Object.assign({},u.node,{keys:Z}),console.log("currentItemKeys:",b),d(b),n(F),ue.next=15,v(b);case 15:case"end":return ue.stop()}},p)}));return function(F,u){return g.apply(this,arguments)}}(),Oe=function(){var g=i()(r()().mark(function p(F,u){return r()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:console.log("expandedKeys:",F),console.log("e:",u);case 2:case"end":return b.stop()}},p)}));return function(F,u){return g.apply(this,arguments)}}(),Me=function(){var g=i()(r()().mark(function p(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:n([]),_({}),d({});case 3:case"end":return u.stop()}},p)}));return function(){return g.apply(this,arguments)}}();return(0,x.useEffect)(function(){te()},[]),console.log("folderDirectoryRowsTree:",s),console.log("selectFolderDirectory:",f),console.log("selectedKeys:",t),console.log("isLoading:",W),(0,a.jsx)(c._z,{children:(0,a.jsxs)("div",{className:"page",children:[(0,a.jsxs)("div",{className:"material",children:[(0,a.jsx)(ee.Z,{}),(0,a.jsx)("div",{className:"content",children:(0,a.jsxs)(B.Z,{children:[(0,a.jsx)(D.Z,{span:5,children:(0,a.jsxs)("div",{className:"folder-menu",children:[(0,a.jsxs)("div",{className:"header",children:[(0,a.jsx)($.Z,{})," \u6587\u4EF6\u76EE\u5F55 ",(0,a.jsx)("span",{onClick:Me,className:"rest-select",children:"(\u8FD4\u56DE\u8DDF\u8282\u70B9)"})]}),(0,a.jsx)("div",{className:"menu-wrap",children:s&&(0,a.jsx)(A.Z,{treeData:s,selectedKeys:t,onSelect:xe,onExpand:Oe,showLine:!0,selectable:!0,checkable:!1})})]})}),(0,a.jsx)(D.Z,{span:19,children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"header",children:[(0,a.jsx)(R.ZP,{onClick:function(){return Pe()},disabled:!(t&&t[0]),children:"\u5220\u9664\u6587\u4EF6\u5939"}),(0,a.jsx)(R.ZP,{onClick:function(){return Ce()},disabled:!(t&&t[0]),children:"\u7F16\u8F91\u6587\u4EF6\u5939"}),(0,a.jsx)(R.ZP,{icon:(0,a.jsx)(N.Z,{}),onClick:function(){return fe()},children:"\u65B0\u5EFA\u6587\u4EF6\u76EE\u5F55"}),(0,a.jsx)(Fe,{selectedKeys:t}),(0,a.jsx)(Ee,{selectedKeys:t})]}),(0,a.jsx)("div",{children:f&&f.is_leaf===1?(0,a.jsx)(L.Z,{}):(0,a.jsx)("div",{className:"no-leaf",children:(0,a.jsx)(J.Z,{description:"...\u4E0D\u662F\u53F6\u5B50\u8282\u70B9\uFF0C\u65E0\u56FE\u7247\u7D20\u6750..."})})}),(0,a.jsx)(ne.Z,{title:z?"\u7F16\u8F91\u6587\u4EF6\u76EE\u5F55":"\u6DFB\u52A0\u6587\u4EF6\u76EE\u5F55",open:P,width:500,onOk:function(){return de()},onCancel:function(){return oe()},children:(0,a.jsx)("div",{className:"content",children:(0,a.jsxs)("div",{className:"form-item",children:[(0,a.jsx)("span",{className:"label",children:"\u6587\u4EF6\u5939\u540D\u79F0: "}),(0,a.jsx)(re.Z,{placeholder:"\u6587\u4EF6\u5939\u540D\u79F0",style:{width:250},value:S&&S.label,onChange:we})]})})})]})})]})})]}),(0,a.jsx)(ae.Z,{size:"large",fullscreen:!0,spinning:W,tip:"\u52A0\u8F7D\u4E2D..."})]})})}var De=ye}}]);
